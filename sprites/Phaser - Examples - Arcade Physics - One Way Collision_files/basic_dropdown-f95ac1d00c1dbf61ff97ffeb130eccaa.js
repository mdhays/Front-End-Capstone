!function(e){function t(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1}function n(e){for(var t=0,n=0;;){if(t+=e.offsetLeft,n+=e.offsetTop,null===e.offsetParent)break;e=e.offsetParent}return[t,n]}function i(e,t){for(var n,i=" "+t+" ";n=e.parentNode;){var s=" "+n.className+" ";if(s.indexOf(i)>-1)return e;e=e.parentNode}}function s(e,t){for(var n in t)e[n]=t[n]}if(!l)var l={};l.BasicDropdown=function(e,t){this.wrapperEl="string"==typeof e?document.getElementById(e):e,this.wrapperEl.className+=" select",this.selectedIndex=0,this.onSelect=t||function(){},this.initDom(),this.initObservers(),l.BasicDropdown.instances.push(this)},s(l.BasicDropdown.prototype,{initDom:function(){this.initButtonLabelEls(),this.initInputEl(),this.initMenuEl()},initButtonLabelEls:function(){this.buttonEl=this.wrapperEl.getElementsByTagName("button")[0],this.labelEl=this.buttonEl.getElementsByTagName("span")[0]},initInputEl:function(){for(var e=this.wrapperEl.getElementsByTagName("input"),t=0,n=e.length;n>t;t++)if("hidden"===e[t].type){this.inputEl=e[t];break}},initMenuEl:function(){this.menuEl=this.wrapperEl.getElementsByTagName("menu")[0],this.setStyle(this.menuEl,{position:"absolute",display:"none",zIndex:"10000006"}),document.body.appendChild(this.menuEl),this.listEl=this.menuEl.getElementsByTagName("ul")[0]||this.menuEl,this.initSelectedEl()},initSelectedEl:function(){for(var e=this.listEl.getElementsByTagName("li"),t=0,n=e.length;n>t;t++)e[t].className=e[t].className.replace("selected","");var i=e[this.selectedIndex];i.className+=" selected"},initObservers:function(){this.initButtonObservers(),this.initMenuObservers()},initButtonObservers:function(){var e=this;this.buttonEl.onclick=function(){e.toggleMenuEl(),e.positionMenuEl()},this.buttonEl.onfocus=function(){l.BasicDropdown.activeInstance=e},this.buttonEl.onblur=function(){delete l.BasicDropdown.activeInstance}},show:function(){this.initSelectedEl(),this.menuEl.style.display="",l.BasicDropdown.activeInstance=this},hide:function(){this.menuEl.style.display="none"},toggleMenuEl:function(){var e=l.BasicDropdown.activeInstance===this&&""===this.menuEl.style.display;this[e?"hide":"show"]()},positionMenuEl:function(){if("none"!==this.menuEl.style.display){var e=n(this.wrapperEl),t=5,i=this.buttonEl.offsetWidth/2-this.menuEl.offsetWidth/2,s=this.buttonEl.offsetHeight/2+t,l=e[0]+i,o=e[1]+s;o+this.menuEl.offsetHeight>this.menuEl.ownerDocument.body.offsetHeight&&(o-=this.menuEl.offsetHeight+this.buttonEl.offsetHeight+t),this.menuEl.style.left=l+"px",this.menuEl.style.top=o+"px"}},initMenuObservers:function(){var e=this;this.listEl.onclick=function(t){return t=t||window.event,e.selectByElement(t.target||t.srcElement),!1}},selectByElement:function(e){if(e!=this.menuEl){var n=e.textContent||e.innerText,i=e.getAttribute("data-value"),s="li"===e.tagName.toLowerCase()?e:e.parentNode;this.selectedIndex=t(this.listEl.getElementsByTagName("li"),s),this.inputEl&&(this.inputEl.value=i),this.labelEl.innerHTML=n,this.hide(),this.onSelect(this.inputEl)}},setStyle:function(e,t){for(var n in t)e.style[n]=t[n]}}),l.BasicDropdown.initFromElements=function(){for(var e=document.getElementsByTagName("span"),t=0,n=e.length;n>t;t++){var i=e[t],s=i.className;/select/.test(s)&&!/\bignore\b/.test(s)&&new l.BasicDropdown(e[t])}},l.BasicDropdown.hideAll=function(){for(var e=0,t=l.BasicDropdown.instances.length;t>e;e++)l.BasicDropdown.instances[e].hide()},l.BasicDropdown.instances=[],e.Widget=l;var o=document.documentElement,a=function(e){e=e||window.event;var t=e.target||e.srcElement,n=i(t,"select");n||l.BasicDropdown.hideAll()},c=function(e){for(var t=l.BasicDropdown.activeInstance.listEl,n=t.getElementsByTagName("li"),i=0,s=n.length;s>i;i++)if((" "+n[i].className+" ").indexOf(" selected ")>-1){n[i].className=n[i].className.replace("selected","");break}var o=n[i+e];o||(o=n[1===e?0:n.length-1]),o.className+=" selected";var a="none"===l.BasicDropdown.activeInstance.menuEl.style.display;a&&r()},r=function(){for(var e=l.BasicDropdown.activeInstance.listEl,t=e.getElementsByTagName("li"),n=0,i=t.length;i>n&&!((" "+t[n].className+" ").indexOf(" selected ")>-1);n++);var s=l.BasicDropdown.activeInstance;setTimeout(function(){s.selectByElement(t[n])},10)},u=function(e){if(l.BasicDropdown.activeInstance)if(40===e.keyCode)e.preventDefault&&e.preventDefault(),e.returnValue=!1,c(1);else if(38===e.keyCode)e.preventDefault&&e.preventDefault(),e.returnValue=!1,c(-1);else if(13===e.keyCode){var t="none"!==l.BasicDropdown.activeInstance.menuEl.style.display;t&&r()}};o.addEventListener?(o.addEventListener("click",a,!1),o.addEventListener("keydown",u,!1)):(o.attachEvent("onclick",a),o.attachEvent("onkeydown",u)),document.addEventListener?document.addEventListener("DOMContentLoaded",l.BasicDropdown.initFromElements):window.attachEvent("onload",function(){l.BasicDropdown.initFromElements()})}(this);